<meta name="readthedocs-addons-api-version" content="1">

<script async type="text/javascript" src="http://localhost:8000/readthedocs-addons.js"></script>
<script type="text/javascript">
 document.addEventListener("readthedocs-addons-data-ready", function(event) {
     const config = event.detail.data();

     const downloadsNameDisplay = {
      pdf: "PDF",
      epub: "EPUB",
      htmlzip: "HTML",
    };

     const flyout = `
  <div class="rst-versions" data-toggle="rst-versions" role="note">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: ${ config.versions.current.slug }
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        ${ config.projects.translations.map(
          (translation) => `
          <dd><a href="${ translation.urls.documentation }">${ translation.slug }</a></dd>
        `).join("\n")}
      </dl>
      <dl>
        <dt>Versions</dt>
        ${ config.versions.active.map(
          (version) => `
          <dd><a href="${ version.urls.documentation }">${ version.slug }</a></dd>
        `).join("\n")}
      </dl>
      <dl>
        <dt>Downloads</dt>
        ${ Object.entries(config.versions.current.downloads).map(
          ([name, url]) => `
          <dd><a href="${ url }">${ downloadsNameDisplay[name] }</a></dd>
        `).join("\n")}
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="${ config.projects.current.urls.home}">Project Home</a>
          </dd>
          <dd>
            <a href="${ config.projects.current.urls.builds }">Builds</a>
          </dd>
          <dd>
            <a href="${ config.projects.current.urls.downloads }">Downloads</a>
          </dd>
      </dl>
    </div>
  </div>
          `;

     document.body.insertAdjacentHTML("beforeend", flyout);
 });
</script>
